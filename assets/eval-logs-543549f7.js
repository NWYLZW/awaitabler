import{a as elBridgeC,F as Files}from"./files-36856eb3.js";const Awaitabler=Object.freeze(Object.defineProperty({__proto__:null,get configure(){return configure},get consumeMiddlewares(){return consumeMiddlewares},get default(){return Awaitabler},get defineMiddleware(){return defineMiddleware},get defineSleepProp(){return defineSleepProp},get defineTags(){return defineTags},get questerMiddleware(){return questerMiddleware},get questerTags(){return questerTags},get regAll(){return regAll},get resolveContext(){return resolveContext},get setConfigure(){return setConfigure},get tags(){return tags},get use(){return use}},Symbol.toStringTag,{value:"Module"}));let tags;function defineTags(e,t){return tags===void 0&&(tags={}),tags[e]=t}const questerTags=defineTags("quester",{json:"[Header.Content-Type=application/json]"}),questerMiddleware=async(e,t)=>{if(["http","https"].includes(e.schema)){let r=fetch(e.target);return e.tags.find(n=>`[${n}]`===questerTags.json)&&(r=r.then(n=>n.json())),r}return t()};let configure;configure={defaultSchema:{}.DEFAULT_SCHEMA||"http"};function setConfigure(e){configure={...configure,...e}}function safeChangePrototype(e,t,r){const n=Object.getOwnPropertyDescriptor(e,t);if((n==null?void 0:n.configurable)===!1)throw new Error(`Cannot change prototype property ${t.toString()} of ${e}`);return Object.defineProperty(e,t,r),()=>{n===void 0?delete e[t]:Object.defineProperty(e,t,n)}}function sleep(e){let t;const r=async n=>(t=n,await r);return r.then=(n,s)=>new Promise((o,i)=>{const c=setTimeout(o,e);t==null||t.addEventListener("abort",()=>{clearTimeout(c),t.reason===null?o():i(t.reason)})}).then(n,s),r}function isFiniteWrap(e){return function(){return Number.isFinite(this)?e.call(this):new Promise(()=>{})}}function defineProperty(e,t){const r=isFiniteWrap(t),n=[safeChangePrototype(Number.prototype,e,{enumerable:!1,configurable:!0,get:r}),safeChangePrototype(BigInt.prototype,e,{enumerable:!1,configurable:!0,get:r})];return()=>n.forEach(s=>s())}function defineSleepProp(e,t){return defineProperty(e,function(){return sleep(Number(this)*t)})}function regNumber(){const e=[defineSleepProp("ms",1),defineSleepProp("s",1e3),defineSleepProp("m",6e4),defineSleepProp("h",36e5),defineSleepProp("d",864e5)];return()=>e.forEach(t=>t())}const AwaitablerNumber=Object.freeze(Object.defineProperty({__proto__:null,default:regNumber,defineSleepProp},Symbol.toStringTag,{value:"Module"}));function resolveContext(e){const t={tags:[],schema:"",target:"",cmd:""};let r="";for(let n=0;n<e.length;n++){const s=e[n];switch(s){case"[":let o="";for(;e[++n]!=="]";)o+=e[n];t.tags.push(o);break;case":":return t.schema=r.trim()||configure.defaultSchema,t.cmd=e.slice(n+1),t.target=`${t.schema}:${t.cmd}`,t;default:r+=s}}return t}function regString(){const e=window,t=e.StringFunction;e.StringFunction=s=>async(o,...i)=>{};const r=e.StringFunction,n=safeChangePrototype(String.prototype,"then",{enumerable:!1,configurable:!0,get(){return(s,o)=>consumeMiddlewares(resolveContext(this.toString())).then(s,o)}});return()=>{r===e.StringFunction&&(e.StringFunction=t),n()}}const AwaitablerString=Object.freeze(Object.defineProperty({__proto__:null,default:regString,resolveContext},Symbol.toStringTag,{value:"Module"})),middlewares=new Set;function defineMiddleware(e){return e}function use(e){return middlewares.add(e),()=>middlewares.delete(e)}async function consumeMiddlewares(e){const t=middlewares.values(),r=async()=>{const n=t.next().value;if(n)return await n(e,r)??await r()};return r()}function regAll(){const e=[regNumber(),regString()];return()=>e.forEach(t=>t())}window.require=function(e){switch(e){case"awaitabler":return Awaitabler;case"awaitabler/prototypes/number":{addDisposeFunc(regNumber());return}case"awaitabler/prototypes/number.reg":return AwaitablerNumber;case"awaitabler/prototypes/string":{addDisposeFunc(regString());return}case"awaitabler/prototypes/string.reg":return AwaitablerString}throw new Error(`Cannot find module '${e}'`)};let prevDisposeFunc;function addDisposeFunc(e){let t=prevDisposeFunc;prevDisposeFunc=()=>{t==null||t(),e==null||e()}}elBridgeC.on("run",()=>{Files.forEach(({name,text:code})=>{if(name==="/index.js")try{prevDisposeFunc==null||prevDisposeFunc(),addDisposeFunc(eval(`(function () { const module = { exports: {} }; const exports = module.exports; ${code}; return module.exports; })()`).dispose)}catch(e){console.error(e)}})});elBridgeC.on("update:localStorage",([e,t])=>{JSON.parse(localStorage.getItem(e)??'""')!==t&&localStorage.setItem(e,JSON.stringify(t))});const scriptRel="modulepreload",assetsURL=function(e){return"/awaitabler/"+e},seen={},__vitePreload=function e(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=assetsURL(o),o in seen)return;seen[o]=!0;const i=o.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!n)for(let l=s.length-1;l>=0;l--){const u=s[l];if(u.href===o&&(!i||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=i?"stylesheet":scriptRel,i||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),i)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},storageInited=localStorage.getItem("storageInited");storageInited||(localStorage.setItem("storageInited",JSON.stringify(!0)),localStorage.setItem("textEditorIndent",JSON.stringify("  ")));localStorage.setItem("consoleShowSettingsToolbar",JSON.stringify(!1));localStorage.setItem("viewsLocationOverride",JSON.stringify({resources:"none",elements:"none",network:"none",sources:"none"}));localStorage.setItem("panel-selectedTab",JSON.stringify("console"));const devtools=document.querySelector("iframe");let devtoolsWindow=devtools.contentWindow,devtoolsDocument=devtools.contentDocument,inited=!1;async function checkInspectorViewIsLoaded(){if(!(await devtoolsWindow.simport("ui/legacy/theme_support/theme_support.js")).ThemeSupport.hasInstance())return;(await devtoolsWindow.simport("ui/legacy/legacy.js")).InspectorView.InspectorView.instance()&&!inited&&(inited=!0,await init())}(async()=>devtoolsDocument.readyState==="complete"?await checkInspectorViewIsLoaded():devtoolsDocument.addEventListener("load",checkInspectorViewIsLoaded,!0))();const plugins=Object.assign({"../../plugins/comment-queries/index.ts":()=>__vitePreload(()=>import("./index-c3cb9c57.js"),["assets/index-c3cb9c57.js","assets/index-7eb6f4b7.js"]).then(e=>e.default),"../../plugins/outputs/index.tsx":()=>__vitePreload(()=>import("./index-04b6b474.js"),["assets/index-04b6b474.js","assets/index-7eb6f4b7.js","assets/files-36856eb3.js"]).then(e=>e.default)});function registerPlugins(e,t){Object.entries(plugins).forEach(async([r,n])=>{var o;const{devtools:s}=await n();(o=s==null?void 0:s.panels)==null||o.forEach(i=>{const c=i(devtoolsWindow,e);t.hasTab(i.id)||t==null||t.appendTab(i.id,i.title,new c)})})}async function init(){for(;;){try{const t=await devtoolsWindow.simport("ui/legacy/legacy.js"),r=t.InspectorView.InspectorView.instance(),n=r==null?void 0:r.tabbedPane;registerPlugins(t,n);break}catch(t){console.error(t)}await new Promise(t=>setTimeout(t,100))}let e=JSON.parse(localStorage.getItem("uiTheme")??'""');elBridgeC.on("update:localStorage",([t,r])=>{if(t==="uiTheme"&&e!==r){const n=devtoolsDocument.querySelector("html");r==="dark"&&n.classList.add("-theme-with-dark-background"),r==="default"&&n.classList.remove("-theme-with-dark-background"),e=r}})}sentinel.on(".__chobitsu-hide__",e=>{var r;(r=e.children[0])==null||r.remove()});
